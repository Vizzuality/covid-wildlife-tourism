<div class="container mt-3">
  <h1><%= I18n.t('views.stats.index.title') %></h1>
</div>

<div class="row mt-4">
  <div class="col-md-12"><p class="h2"><%= t('views.stats.index.totals') %></p></div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title"><%= t('views.stats.index.total_users') %></h5>
        <table class="table table-sm">
          <tbody>
            <% User.roles.each do |r| %>
              <tr>
                <td><%= t("activerecord.enums.user.roles.#{r[0]}") %></td>
                <td><%= User.where(role: r).count %></td>
              </tr>
            <% end %>
            <tr>
              <th><%= t('views.stats.index.total') %></th>
              <td><%= User.count %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title"><%= t('views.stats.index.total_stores') %></h5>
        <table class="table table-sm">
          <tbody>
            <% Store.store_types.each do |r| %>
              <tr>
                <td><%= t("activerecord.enums.store.store_types.#{r[0]}") %></td>
                <td><%= Store.where(store_type: r, state: :live).count %></td>
              </tr>
            <% end %>
            <tr>
              <th><%= t('views.stats.index.total') %></th>
              <td><%= Store.where(state: :live).count %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-md-12"><p class="h3"><%= t('views.stats.index.break_per_day') %></p></div>
  <div class="col-md-6">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title"><%= t('views.stats.index.users_per_day') %></h5>
        <%= line_chart @users_per_day %>
      </div>
    </div>
  </div>
</div>
